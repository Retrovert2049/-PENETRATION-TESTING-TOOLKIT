import argparse
import socket
import threading
import time

class PortScanner:
    def __init__(self, target_ip):
        self.target_ip = target_ip

    def scan_port(self, port):
        try:
            sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            sock.settimeout(1)
            result = sock.connect_ex((self.target_ip, port))
            if result == 0:
                print(f"Port {port} is open")
            sock.close()
        except Exception as e:
            pass

    def scan_ports(self, start_port, end_port):
        threads = []
        for port in range(start_port, end_port + 1):
            t = threading.Thread(target=self.scan_port, args=(port,))
            threads.append(t)
            t.start()

        for t in threads:
            t.join()

class BruteForcer:
    def __init__(self, target_ip, username, password_list):
        self.target_ip = target_ip
        self.username = username
        self.password_list = password_list

    def brute_force(self):
        for password in self.password_list:
            # Implement authentication logic here
            pass

def main():
    parser = argparse.ArgumentParser(description="Penetration Testing Toolkit")
    parser.add_argument("--scan", action="store_true", help="Run port scanner")
    parser.add_argument("--brute", action="store_true", help="Run brute forcer")
    parser.add_argument("--ip", required=True, help="Target IP address")
    parser.add_argument("--start-port", type=int, default=1, help="Start port number")
    parser.add_argument("--end-port", type=int, default=1024, help="End port number")
    parser.add_argument("--username", help="Username for brute forcing")
    parser.add_argument("--password-list", help="Password list file")

    args = parser.parse_args()

    if args.scan:
        scanner = PortScanner(args.ip)
        scanner.scan_ports(args.start_port, args.end_port)

    if args.brute:
        with open(args.password_list, "r") as f:
            passwords = f.read().splitlines()
        bruter = BruteForcer(args.ip, args.username, passwords)
        bruter.brute_force()

if __name__ == "__main__":
    main()